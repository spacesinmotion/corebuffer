version: 0.1.{build}

branches:
  only:
    - master
    - develop

image:
- Visual Studio 2017
- Ubuntu

environment:
  CMAKE_BUILD_TYPE: Release

build_script:
- sh: >-
    mkdir build

    cd build

    cmake ..

    cmake --build . --target all

- cmd: >-
    mkdir build

    cd build

    cmake ..

    cmake --build .

test_script:
- sh: ctest --output-on-failure
- cmd: ctest --output-on-failure -C Release

